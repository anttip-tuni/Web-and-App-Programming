<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .circle{
            width: 5vw;
            height: 5vw;
            border-radius: 50%;
            background-color: crimson;
        }

        div#header {
            display: flex;
        }

        .plusButton {
            font-size: 4rem;
            font-weight: bolder;
            background-color: darkgrey;
            width: 5rem;
            height: 5rem;
            border-radius: 0.5rem;
            text-align: center;
            margin-left: 1rem;
        }

        .selected{
            border: 3px dashed darkblue;
        }

       .circle {
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
}

.textarea {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 65%;
    height: 65%;
}

    </style>

    <link rel="stylesheet" href="jquery-ui.css">
</head>
<body>

    <div id="header">
        <h1>Mind Mapper</h1>
        <div class="plusButton">+</div>
    
    </div>

    <div class="circle">
        <div class="textarea" contenteditable="true">Editable text</div>
    </div>

    <script src="jquery-3.6.3.js"></script>
    <script src="jquery-ui.min.js"></script>

    <script>

        //animate the circle with vanilla js:
        
       /*  const myCircle = document.querySelector('.circle');

        //set up animation properties
        let animationProperties = {
            width: '10vw',
            height: '10vw'
        }

        let animationOptions = {
            duration: 2000
        }

        myCircle.animate(animationProperties, animationOptions); */

    $('.plusButton').click(function () {
        let myNewCircle = $('<div class="circle"><div class="textarea" contenteditable="true">Editable text</div></div>');
        $(myNewCircle).animate({
            width: '20vw',
            height: '20vw'
        }, 2000);
        $('body').append(myNewCircle);
        $(myNewCircle).draggable({
            start: function (event, ui) {
                $(this).find('[contenteditable]').attr('contenteditable', 'false'); // find any child elements with the contenteditable attribute and set it to false when dragging starts, and set it back to true when dragging ends. This prevents accidental text editing during dragging.
            },
            stop: function (event, ui) {
                $(this).find('[contenteditable]').attr('contenteditable', 'true');
            }
        });
        $(myNewCircle).find('[contenteditable]').on('mousedown', function (event) {
            event.stopPropagation();
        });
    });


       

        $('.circle').animate({
            width: '20vw',
            height: '20vw'
        },2000);

        $('.circle').draggable({
                start: function (event, ui) {
                    $('.circle').find('[contenteditable]').attr('contenteditable', 'false');
                },
                stop: function (event, ui) {
                    $('.circle').find('[contenteditable]').attr('contenteditable', 'true');
                }
            });
            $('.circle').find('[contenteditable]').on('mousedown', function (event) {
                event.stopPropagation();
            });;

       
        //will only work for the existing circle, but not for new circles that are added dynamically
        $('body').on('click', '.circle', function(){
            $(this).toggleClass('selected');
        });

        //remove selection from circles if just the body was clicked
        $('body').click(function(e){
            if ($(e.target).is('body')){
                 $('.circle').removeClass('selected');
            }
        })
 


    </script>
    
</body>
</html>